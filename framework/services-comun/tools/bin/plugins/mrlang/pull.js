"use strict";exports.id=144,exports.ids=[144],exports.modules={426:(l,s,o)=>{o.d(s,{Pull:()=>a});var e=o(386),i=o(203),t=o(174),n=o(189);class a{static async run(l,s=[]){if(!await(0,e.fo)(`${l}/i18n/.credenciales/mysql.json`))return Promise.reject("No hay credenciales en /i18n/.credenciales/ para descargar las traducciones");const{config:o}=await(0,e.TQ)(`${l}/i18n/package.json`),a=`${l}/i18n/.json`,c=this.pullCheckModulos(o,s),u=Object.keys(o.modulos);await(0,e.Q7)(a)||await(0,e.Ck)(a,!0);const d=await i.K.fromMySQL(),r=(await Promise.allSettled(u.filter((l=>!l.includes("."))).map((l=>t.P.load(l,o,d))))).filter((l=>"fulfilled"==l.status)).map((l=>l.value));if(await(0,e.TC)(`${l}/i18n/.json/idiomas.json`,JSON.stringify(d.toJSON(),null,2)),await Promise.all([...r.map((s=>s.toFile(l,o)))]),await n.A.close(),c){const s=await(0,e.TQ)(`${l}/i18n/package.json`);s.config=o,await(0,e.TC)(`${l}/i18n/package.json`,`${JSON.stringify(s,null,2)}\n`,!0)}}static pullCheckModulo(l,s){let o=!1;const e=s.split(".");let i=e.shift();for(;e.length>0;){const s=e.shift(),t=l.modulos[i];if(null==t)o=!0,l.modulos[i]={include:[s]};else{if(null!=t.exclude){const l=t.exclude.indexOf(s);l>=0&&(o=!0,t.exclude.splice(l,1))}null!=t.include&&(t.include.includes(s)||(o=!0,t.include.push(s),t.include.sort()))}i=`${i}.${s}`}return null==l.modulos[i]&&(o=!0,l.modulos[i]={}),o}static pullCheckModulos(l,s){let o=!1;for(const e of s){const s=this.pullCheckModulo(l,e);o=o||s}if(o){const s={langs:l.langs,modulos:{}};for(const o of Object.keys(l.modulos).sort())s.modulos[o]=l.modulos[o];l.modulos=s.modulos}return o}}}};
//# sourceMappingURL=pull.js.map