{"version":3,"file":"plugins/mrlang/fremote.js","mappings":"6IAKO,MAAMA,EAET,gBAAaC,CAAIC,EAASC,GACtB,UAAW,QAAO,GAAGD,mCACjB,OAAOE,QAAQC,OAAO,sFAE1B,MAAM,OAAEC,SAAiB,QAAS,GAAGJ,uBAC/BK,QAAgB,IAAcC,YACzBC,MAAPN,IACAA,QAAY,IAAYO,UAE5B,MAAMC,QAAgBP,QAAQQ,IAAIT,EAAIU,KAAIC,GAAM,IAAYC,KAAKD,EAAIR,EAAQC,YACvEH,QAAQQ,IAAID,EAAQE,KAAIG,GAAUA,EAAOC,uBACzCb,QAAQQ,IAAID,EAAQE,KAAIG,GAAUA,EAAOE,sBACzC,IAAGC,OACb,E","sources":["webpack://services-comun/./tools/src/mrlang/clases/fremote.ts"],"sourcesContent":["import { readJSON } from \"services-comun/modules/utiles/fs\";\nimport { IdiomasLoader } from \"./idioma/loader\";\nimport { ModuloMySQL } from \"./modulo/mysql\";\nimport { isFile } from \"../../../../modules/utiles/fs\";\nimport db from \"../mysql\";\nexport class FixRemote {\n    /* STATIC */\n    static async run(basedir, ids) {\n        if (!await isFile(`${basedir}/i18n/.credenciales/mysql.json`)) {\n            return Promise.reject(\"No hay credenciales en /i18n/.credenciales/ para corregir las traducciones remotas\");\n        }\n        const { config } = await readJSON(`${basedir}/i18n/package.json`);\n        const idiomas = await IdiomasLoader.fromMySQL();\n        if (ids == undefined) {\n            ids = await ModuloMySQL.getIDS();\n        }\n        const modulos = await Promise.all(ids.map(id => ModuloMySQL.load(id, config, idiomas)));\n        await Promise.all(modulos.map(modulo => modulo.refreshHash()));\n        await Promise.all(modulos.map(modulo => modulo.fixVersion()));\n        await db.close();\n    }\n}\n"],"names":["FixRemote","run","basedir","ids","Promise","reject","config","idiomas","fromMySQL","undefined","getIDS","modulos","all","map","id","load","modulo","refreshHash","fixVersion","close"],"sourceRoot":""}